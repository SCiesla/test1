MoÅ¼esz to zrobiÄ‡ **dynamicznie**, przekazujÄ…c kolory z bazy danych do **template** i nadpisujÄ…c CSS za pomocÄ… **inline `<style>`** lub generujÄ…c **dynamiczny plik CSS**.

PoniÅ¼ej masz **najprostszy, praktyczny i dziaÅ‚ajÄ…cy sposÃ³b**.

---

# âœ… **1. Model z kolorami (JSONField)**

```python
class UserProfile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    colors = models.JSONField(default=dict)
```

PrzykÅ‚ad wartoÅ›ci w kolumnie `colors`:

```json
{
    "main-color": "#F54927",
    "second-color": "#9C402D"
}
```

---

# âœ… **2. Pobranie kolorÃ³w w widoku i wysÅ‚anie do szablonu**

```python
def dashboard(request):
    user_profile = UserProfile.objects.get(user=request.user)
    colors = user_profile.colors

    return render(request, "dashboard.html", {
        "colors": colors
    })
```

---

# âœ… **3. W szablonie nadpisujesz zmienne CSS**

W pliku **dashboard.html** (lub base.html jeÅ›li ma dotyczyÄ‡ caÅ‚ego UI):

```html
{% if colors %}
<style>
:root {
    {% for key, value in colors.items %}
        --{{ key }}: {{ value }};
    {% endfor %}
}
</style>
{% endif %}
```

To sprawi, Å¼e **statycznie zdefiniowane root** zostanÄ… **nadpisane** tymi z bazy danych.

---

# âš ï¸ WaÅ¼ne: twoje domyÅ›lne CSS muszÄ… byÄ‡ zaÅ‚adowane PRZED tym style

Np.:

```html
<link rel="stylesheet" href="{% static 'css/main.css' %}">
{% block extra_css %}
    <!-- tutaj wstrzykujemy kolory -->
{% endblock %}
```

Wtedy nadpisanie zadziaÅ‚a.

---

# ğŸ”¥ **Efekt**

KaÅ¼dy uÅ¼ytkownik po zalogowaniu dostaje *swÃ³j wÅ‚asny motyw kolorystyczny*.

DomyÅ›lny CSS:

```css
:root {
    --main-color: #F54921;
    --second-color: #123456;
}
```

UÅ¼ytkownik ma w DB:

```json
{
    "main-color": "#F54927",
    "second-color": "#9C402D"
}
```

Po renderowaniu otrzymujesz finalnie:

```html
<style>
:root {
    --main-color: #F54927;
    --second-color: #9C402D;
}
</style>
```

PrzeglÄ…darka nadpisuje wartoÅ›ci i motyw wyglÄ…da inaczej dla kaÅ¼dego usera.

---

# â— Alternatywa: dynamiczny CSS endpoint (Å‚adny i czysty)

JeÅ›li chcesz mieÄ‡ osobny plik CSS per user:

### urls.py

```python
path("user-theme.css", views.user_theme_css, name="user_theme_css")
```

### views.py

```python
from django.http import HttpResponse

def user_theme_css(request):
    user_profile = UserProfile.objects.get(user=request.user)
    colors = user_profile.colors

    css = ":root {\n"
    for k, v in colors.items():
        css += f"  --{k}: {v};\n"
    css += "}"

    return HttpResponse(css, content_type="text/css")
```

### template

```html
<link rel="stylesheet" href="{% url 'user_theme_css' %}">
```

---

JeÅ¼eli chcesz, mogÄ™ Ci przygotowaÄ‡:

âœ” gotowÄ… strukturÄ™ projektu
âœ” wersjÄ™ z cache per user
âœ” fallback na kolory domyÅ›lne
âœ” JS, ktÃ³ry przeÅ‚Ä…cza motywy

Daj tylko znaÄ‡!
